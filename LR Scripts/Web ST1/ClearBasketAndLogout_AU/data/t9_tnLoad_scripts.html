var appliedDimIdArray=new Array();var lastPositiveAttrArray=new Array();var lockedDivList=new Array();var lockTimerMap={};var lastRemovedArray=new Array();var isAjaxRequestActive=false;var appliedFilterAttrMap={};var filterAttrValueArray=[];var expandedFilterId;jQuery(document).ready(function(){initiateSelectors();initTNArrays();initiateTNScripts();bindHashChangeEvent();isTNPage=true});function bindHashChangeEvent(){Hash.init(function(c){if(!isAjaxRequestActive){var a=getURLParam(getHashtagUrl(),"applied-dimensions");expandedFilterId=getURLParam(getHashtagUrl(),"esid");var b=a.split(",");if(!isArraysEqual(appliedDimIdArray,b)){if(b.length>0){appliedDimIdArray=b.slice(0)}else{appliedDimIdArray=new Array()}submitTNPage()}}})}var attrCheckboxes;var mpcCounter;function initiateSelectors(){mpcCounter=jQuery("div.mpcCounter").find("span")}function initiateTNScripts(){dockHeader();setZeroDisabled()}function setZeroDisabled(){if(jQuery("div.mpcCounter").find("span").html()==0){jQuery("tr.attrItem").each(function(){jQuery(this).find("input.chkbox").attr("disabled","true")})}}var oldAttrArray,newAttrArray;var selectedAttr=jQuery(".activeAttrList").find("a").map(function(a,b){if(isNotEmptyStr(b.id)){return b.id}});oldAttrArray=jQuery.makeArray(selectedAttr);newAttrArray=jQuery.makeArray(selectedAttr);function submitTNPageByAjax(){isAjaxRequestActive=true;jQuery("#ajaxDimensionIds").val(appliedDimIdArray.join());jQuery("#ajaxSortby").val(getURLParam(getHashtagUrl(),"sort-by"));jQuery("#ajaxSortorder").val(getURLParam(getHashtagUrl(),"sort-order"));jQuery("#ajaxEsid").val(expandedFilterId);makeAjaxCall()}function updateHashTagUrl(){var b=getHashtagUrl();b=updateQueryParam(b,"applied-dimensions",appliedDimIdArray.join());b=updateQueryParam(b,"esid",expandedFilterId);var c=getURLParam(b,"sort-by");if(c!=null&&c!=""){b=updateQueryParam(b,"sort-by",getURLParam(b,"sort-by"));b=updateQueryParam(b,"sort-order",getURLParam(b,"sort-order"))}else{b=updateQueryParam(b,"sort-by",getURLParam(getSearchUrl(),"sort-by"));b=updateQueryParam(b,"sort-order",getURLParam(getSearchUrl(),"sort-order"))}var a=getURLParam(b,"aaaExp");if(a!=null&&a!=""){if(a=="N"){b=updateQueryParam(b,"aaaExp","N")}else{b=updateQueryParam(b,"aaaExp","Y")}}window.location.hash=b}function initTNArrays(){var c=jQuery("#hiddenDimIds").val();if(c!=""){appliedDimIdArray=c.split(",")}expandedFilterId=getURLParam(getSearchUrl(),"esid");var e=getURLParam(getSearchUrl(),"aaaExp");if(false){if(window.location.hash){var a=getURLParam(getHashtagUrl(),"applied-dimensions");expandedFilterId=getURLParam(getHashtagUrl(),"esid");var d=new Array();if(isNotEmptyStr(a)){var d=a.split(",")}if(d.length>0&&!isArraysEqual(appliedDimIdArray,d)){appliedDimIdArray=d.slice(0);submitTNPageByAjax()}}else{if(appliedDimIdArray.length>0){updateHashTagUrl()}}}if(mpcCounter.html()!=0){lastPositiveAttrArray=appliedDimIdArray.slice(0)}else{var b=getURLParam(getSearchUrl(),"last-removed");if(isNotEmptyStr(b)){lastRemovedArray=b.split(",");lastPositiveAttrArray=lastRemovedArray.slice(0)}}}function toggleChkBox(a,b){if(!jQuery("#"+a).attr("disabled")){attrId=jQuery("#"+a).attr("id");attrId=attrId.substring(attrId.indexOf("_")+1);if(jQuery("#"+a).attr("checked")){jQuery("#"+a).attr("checked","checked");newAttrArray.push(attrId)}else{jQuery("#"+a).removeAttr("checked");newAttrArray.remove(attrId)}checkBoxCallback(jQuery("#"+a),b)}else{return false}}
/*!
 * jQuery Dragscrollable Plugin v1.0
 */
(function(a){a.fn.scrollsync=function(c){function d(e){e.data.xaxis&&e.data.followers.scrollLeft(e.data.target.scrollLeft()),e.data.yaxis&&e.data.followers.scrollTop(e.data.target.scrollTop())}var b=a.extend({targetSelector:":first",axis:"xy"},c||{});b.target=this.filter(b.targetSelector).filter(":first"),b.followers=this.not(b.target),b.xaxis=b.axis=="xy"||b.axis=="x"?!0:!1,b.yaxis=b.axis=="xy"||b.axis=="y"?!0:!1;if(!b.xaxis&&!b.yaxis){return}b.target.bind("scroll",b,d)}})(jQuery),(function(a){a.fn.dragscrollable=function(d){var g="mousemove",e=!1,b=a.extend({dragSelector:">:first",acceptPropagatedEvent:!0,preventDefault:!0},d||{}),c={mouseDownHandler:function(f){if(f.target.tagName=="INPUT"){return !0}return(f.target.tagName=="B"||f.target.tagName=="TD"||f.target.tagName=="TH")&&(f.target=this),f.which!=1||!f.data.acceptPropagatedEvent&&f.target!=this?e:(f.data.lastCoord={left:f.clientX,top:f.clientY},a.event.add(document,"mouseup",c.mouseUpHandler,f.data),a.event.add(document,g,c.mouseMoveHandler,f.data),f.data.preventDefault?(f.preventDefault(),e):void 0)},mouseMoveHandler:function(h){var f={left:h.clientX-h.data.lastCoord.left,top:h.clientY-h.data.lastCoord.top};return h.data.scrollable.scrollLeft(h.data.scrollable.scrollLeft()-f.left),h.data.scrollable.scrollTop(h.data.scrollable.scrollTop()-f.top),h.data.lastCoord={left:h.clientX,top:h.clientY},h.data.preventDefault?(h.preventDefault(),e):void 0},mouseUpHandler:function(f){return a.event.remove(document,g,c.mouseMoveHandler),a.event.remove(document,"mouseup",c.mouseUpHandler),f.data.preventDefault?(f.preventDefault(),e):void 0}};this.each(function(){var f={scrollable:a(this),acceptPropagatedEvent:b.acceptPropagatedEvent,preventDefault:b.preventDefault};a(this).find(b.dragSelector).bind("mousedown",f,c.mouseDownHandler)})}})(jQuery);function scrollSyncPane(){jQuery("#viewport, #header_viewport").scrollsync({targetSelector:"#viewport",axis:"x"});jQuery("#viewport, #header_viewport").scrollsync({targetSelector:"#header_viewport",axis:"x"});jQuery("#viewport, #header_viewport").dragscrollable({dragSelector:".dragger",acceptPropagatedEvent:true});jQuery("#viewport, #header_viewport").dragscrollable({dragSelector:".fixedColumn",acceptPropagatedEvent:false});jQuery("#header_viewport").scroll(function(){jQuery(".fixedColumn").css("left",jQuery(this).scrollLeft()+"px")})}var navigationMaskFlag=true;var resultMaskFlag=true;
/*!
 * Copyright (c) 2009-2011 Andreas Blixt <andreas@blixt.org>
 * Contributors: Aaron Ogle <aogle@avencia.com>,
 *               Matti Virkkunen <mvirkkunen@gmail.com>,
 *               Simon Chester <simonches@gmail.com>
 * http://github.com/blixt/js-hash
 * MIT License: http://www.opensource.org/licenses/mit-license.php
 *
 * Hash handler
 * Keeps track of the history of changes to the hash part in the address bar.
 */
var Hash=(function(){var g=this,e=document.documentMode,f=g.history,l,c,b,d=function(){var m=g.location.href.indexOf("#");return(m==-1?"":g.location.href.substr(m+1))},i=function(){var m=d();if(m!=c){c=m;l(m,false)}},h=function(){var m="onhashchange";var n=(m in document.body);if(!n){document.body.setAttribute(m,"return;");n=typeof document.body[m]=="function"}return n&&(document.documentMode===undefined||document.documentMode>7)},k=function(){var n=document.createElement();n.innerHTML='<iframe src="javascript:void(0)" tabindex="-1" style="display: none;"></iframe>';var m=n.childNodes[0];document.body.appendChild(m);return m},a=function(m){try{var o=b.contentWindow.document;o.open();o.write("<html><body>"+m+"</body></html>");o.close();c=m}catch(n){setTimeout(function(){a(m)},10)}},j=function(){try{b=k()}catch(n){setTimeout(j,10);return}a(c);var m=c;setInterval(function(){var o,p;try{o=b.contentWindow.document.body.innerText;if(o!=m){m=o;g.location.hash=c=o;l(o,true)}else{p=d();if(p!=c){a(p)}}}catch(q){}},50)};return{init:function(m){if(l){return}l=m;c=d();m(c,true);if(h()){if(g.addEventListener){g.addEventListener("hashchange",i,false)}else{if(g.attachEvent){g.attachEvent("onhashchange",i)}}}else{if(g.ActiveXObject){if(!e||e<8){j()}}else{if(f.navigationMode){f.navigationMode="compatible"}setInterval(i,50)}}},go:function(m){if(m==c){return}if(b){a(m)}else{g.location.hash=c=m;l(m,false)}}}})();