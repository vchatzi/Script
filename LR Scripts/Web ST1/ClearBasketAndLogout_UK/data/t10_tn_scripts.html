var isMPCActivated=false;var isAttrChecked=0;var attrId;var inactiveUpdateDiv=jQuery("div.inactiveUpdate");var activeUpdateDiv=jQuery("div.activeUpdate");var srtnMpcDiv=jQuery("div.srtnMpcDiv");function scrollToBottomOfResults(){var a=jQuery("span#srtnLeftNavigationPanel").height();var b=jQuery("div.srtnRightDiv").height();var c=jQuery(window).scrollTop();if((a>b)&&(c>b)){scrollToWithDelay("div.srtnRightDiv",100)}}function submitTNPage(){isAjaxRequestActive=true;jQuery("#ajaxDimensionIds").val(appliedDimIdArray.join());jQuery("#ajaxSortby").val(getURLParam(getHashtagUrl(),"sort-by"));jQuery("#ajaxSortorder").val(getURLParam(getHashtagUrl(),"sort-order"));jQuery("#ajaxEsid").val(expandedFilterId);makeUpdateResultsCall()}var lastChecked=null;var lastAttr=null;var currentAttr=null;function checkBoxCallback(d,f){navigationMaskFlag=false;var c=jQuery(d).attr("checked");var h=jQuery(d).attr("id").split("_")[1];var j=jQuery(d).closest(".attributesContainer");jQuery.chkboxes=jQuery(j).find(":checkbox:not(:disabled)");currentAttr=jQuery(j).attr("id");if(f&&lastChecked!=null&&lastAttr==currentAttr){var g=jQuery("#"+lastChecked);var a=jQuery.chkboxes.index(d);var e=jQuery.chkboxes.index(g);var b=jQuery.chkboxes.slice(Math.min(a,e),Math.max(a,e)+1);var k=0;jQuery.each(b,function(){var l=jQuery(this).attr("id").split("_")[1];modifyArray(appliedDimIdArray,l,c);if((c&&!jQuery(this).attr("checked"))||(!c&&jQuery(this).attr("checked"))){jQuery(this).attr("checked",c)}})}else{modifyArray(appliedDimIdArray,h,c)}lastChecked=jQuery(d).attr("id");lastAttr=jQuery(j).attr("id");submitTNPageByAjax()}function ajaxCallbackForRerender(){if(isRerenderMode){initiateSelectors();isAjaxRequestActive=false;navigationMaskFlag=true}}function ajaxCallbackForClientSide(data){jsonObj=eval("("+data+")");if(jsonObj.isAjaxSuccess){updateHashTagUrl()}if(!isRerenderMode){updateAttributesWithJSON();isAjaxRequestActive=false;navigationMaskFlag=true}}function updateAttributesWithJSON(){if(jsonObj==undefined||jsonObj==null){return}var a=jsonObj.mpc==0;if(a){jQuery("#zeroResultsMessagePanel").show();resizeLayers()}else{jQuery("#zeroResultsMessagePanel").hide()}}function resizeLayers(){var b=jQuery("#zeroResultsMessagePanel");var e=jQuery("div.srtnRightDiv");var a=jQuery(e).position();var c=a.top;var d=a.left;jQuery(b).addClass("absolute").css("top",c).css("left",d).css("height",jQuery(e).height())}function removeActiveAttribute(a){modifyArray(appliedDimIdArray,a,false);submitTNPage()}function removeAppliedFilter(a){var b=appliedFilterAttrMap[a];for(i=0;i<b.length;i++){modifyArray(appliedDimIdArray,b[i],false)}submitTNPage()}function addFilterAttributesinMap(a,b){appliedFilterAttrMap[a]=b;filterAttrValueArray=[]}function submitZeroResult(a){if(false){submitZeroResultByAjax(a)}else{submitZeroResultByGETRequest(a)}}function submitZeroResultByAjax(a){if(a=="LAST_SELECTION"){appliedDimIdArray=lastPositiveAttrArray.slice(0)}else{appliedDimIdArray.length=0}jQuery("#ajaxDimensionIds").val(appliedDimIdArray.join());makeAjaxCall()}function submitZeroResultByGETRequest(a){var b=getSearchUrl();if(a=="LAST_SELECTION"){clearArray(lastRemovedArray);lastPositiveAttrArray.push.apply(lastPositiveAttrArray,appliedDimIdArray);b=updateQueryParam(b,"applied-dimensions",lastPositiveAttrArray.join());b=updateQueryParam(b,"esid",(isViewAllLinkEnabled)?"all":getExpandedNavGroupIds().join());b=updateQueryParam(b,"m","1");window.location.assign("?"+b)}else{removeAllActiveAttributes()}}function triggerTimer(c){var a=jQuery(c).attr("id");if(!inArray(a,lockedDivList)){modifyArray(lockedDivList,a,true);var b="showLoadingDiv('"+a+"',false);";if(!isKeyInMap(lockTimerMap,a)){lockTimerMap[a]=setTimeout(b,navResponseTimeOut)}}}function showLoadingDiv(a,c){if(c){jQuery(".srtnOverlapHContainer .loadingOverlapDiv").show().css("height",getHeight(jQuery(".srtnResultsHeader")));jQuery(".srtnOverlapContainer .srtnOverlapDiv").show().css("height",getHeight(jQuery(".srtnResultsLayoutDiv")))}var b=a.slice(-10);jQuery("div.srtnAttrDiv div.attrContainer").each(function(){var d=jQuery(this);var e=d.find("div.loadingOverlapDiv");var f=jQuery(d).attr("id").slice(-10);if(b!=f){e.css("height",getHeight(d));e.addClass("overlapDiv").show()}});jQuery("#"+a).parents("div.attrContainer").find("div.loadingOverlapDiv").removeClass("overlapDiv")}function showLoadingDivBothSides(){showLoadingDiv(jQuery("div.brandattrbox").attr("id"),true)}function hideLoadingDiv(a){var c=jQuery("#"+a);var b=jQuery(c).find(".loadingOverlapDiv").attr("class");jQuery(c).find(".loadingOverlapDiv").hide();jQuery("."+b).removeAttr("style")}function submitTNBrandRequest(a,b){submitTNBrandRequestByGET(b)}function removeBrandDimensionsFromURL(){jQuery(".brandDiv").find(":input:checkbox:checked").each(function(){var b=jQuery(this).attr("id").split("_")[1];if(inArray(b,appliedDimIdArray)){var a=jQuery.inArray(b,appliedDimIdArray);appliedDimIdArray.splice(a,1)}})}function submitTNBrandRequestByGET(d){var b=d;removeBrandDimensionsFromURL();if(appliedDimIdArray.length>0){b=b+","+appliedDimIdArray.join()}var c=getURLParam(getSearchUrl(),"sort-by");var a=getURLParam(getSearchUrl(),"sort-order");if(c!=null&&c!=""){b=updateQueryParam(b,"sort-by",c)}if(a!=null&&a!=""){b=updateQueryParam(b,"sort-order",a)}window.location.assign(b)}function submitTNBrandRequestByAjax(a){removeBrandDimensionsFromURL();appliedDimIdArray.push(a);submitTNPageByAjax()}var cmCounter=0;var t;var cmTimer=0;function timedCount(){cmCounter=cmCounter+1;t=setTimeout(function(){timedCount()},1000)}function checkCMTimer(){cmCounter=0;if(!cmTimer){cmTimer=1;setTimeout(function(){timedCount()},10)}}function stopCount(){clearTimeout(t);cmTimer=0}function sendLiveChatDataForTnPage(data){var jsonObj=eval("("+data+")");if(false){if(jsonObj.isAjaxSuccess&&isLiveChatEnabled){sendLiveChatData()}}}function showAjaxMask(d){for(var c=0;c<arguments.length;c++){var a=jQuery(arguments[c]);var b=a.find("div.loadingOverlapDiv");b.css("height",getHeight(a));b.show()}}function hideAjaxMask(d){if(arguments.length>0){for(var a=0;a<arguments.length;a++){var c=jQuery(arguments[a]);var b=jQuery(c).find(".loadingOverlapDiv").attr("class");jQuery(c).find(".loadingOverlapDiv").hide()}}else{jQuery("div.srtnNavDiv div.loadingOverlapDiv").hide()}}function maskResultsSection(){jQuery(".srtnOverlapHContainer .loadingOverlapDiv").show().css("height",getHeight(jQuery(".srtnResultsHeader")));jQuery(".srtnOverlapContainer .srtnOverlapDiv").show().css("height",getHeight(jQuery(".srtnResultsLayoutDiv")))}var isAttrLayerOpen=false;function openAttributesLayer(e,d,b){maskResultsSection();jQuery(".btnPromptLayerDiv").hide();jQuery(".filterLayerTitle").html(d);jQuery(".attributesContainer").attr("id","filter_"+b);selectedElement=jQuery(e).closest("li");var a=jQuery(selectedElement).height();var g=jQuery(selectedElement).width();if(a==null||g==null||a===0||g===0){jQuery(".attributesModalLayerPointer").fadeOut();jQuery(".attributesModalLayer").fadeIn()}else{var c=jQuery(selectedElement).position().top;var f=jQuery(selectedElement).position().left;if(c>(window.innerHeight-jQuery(".attributesModalLayer").outerHeight())){c=c-(jQuery(".attributesModalLayer").outerHeight()/3)+a}else{c=c-(jQuery(".attributesModalLayer").outerHeight()/3)+a}jQuery(".attributesModalLayerPointer").fadeIn().css({left:f+g-6,top:jQuery(selectedElement).position().top-8});jQuery(".attributesModalLayer").fadeIn().css({left:f+g+22,top:c-(a/2)})}isAttrLayerOpen=true}function updateAttrCheckbox(c){var a=jQuery("#"+c).attr("class");var b=jQuery("#"+c).find("input:checkbox");switch(a){case"applied":b.attr("checked","checked");break;case"disabled":b.attr("disabled","true");break;case"implied":b.attr("checked","true").attr("disabled","true");break;default:}}function closeAttributesLayer(a){isAttrLayerOpen=false;jQuery(".attributesModalLayerPointer").fadeOut();jQuery(".attributesModalLayer").fadeOut();showButtonPromptLayer(a);if(!a){jQuery(".srtnOverlapHContainer .loadingOverlapDiv").hide();jQuery(".srtnOverlapContainer .srtnOverlapDiv").hide()}}function showButtonPromptLayer(b){if(b&&!isAttrLayerOpen){var c=jQuery(".mpcUpdateBtnDiv").position().top;var a=getHeight(jQuery(".mpcUpdateBtnDiv"));jQuery(".btnPromptLayerDiv").fadeIn().css({top:c-(a/2)});jQuery(".buttonPromptModalLayer").fadeIn().css({top:c-(a/2)})}}function callOnDemandFilterComplete(a){expandedFilterId=a;updateHashTagUrl()}function toggleAppliedFilterArea(a){var b=jQuery(a);if(b.hasClass("collapseIcon")){b.removeClass("collapseIcon");b.addClass("expandIcon");jQuery(".appliedFiltersSection").hide()}else{if(b.hasClass("expandIcon")){b.removeClass("expandIcon");b.addClass("collapseIcon");jQuery(".appliedFiltersSection").show()}}};